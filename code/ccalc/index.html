<!DOCTYPE html>
<html lang="en">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="theme-color" content="#259669" />

<meta name="generator" content="Hugo 0.79.1" />
<meta name="author" content="Alex Carney" />
<meta name="description" content="A CPython extension that embeds the `simple-ast` program into Python
" />

<meta property="og:title" content="ccalc" />
<meta property="og:description" content="A CPython extension that embeds the `simple-ast` program into Python
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.alcarney.me/code/ccalc/" />
<meta property="article:modified_time" content="2021-05-27T18:58:37+01:00" />

<meta property="article:tag" content="c" />
<meta property="article:tag" content="python" />

<meta name="twitter:creator" content="@alcarneyme" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ccalc"/>
<meta name="twitter:description" content="A CPython extension that embeds the `simple-ast` program into Python
"/>


<title>ccalc | Alex Carney</title>



<link rel="stylesheet" href="https://www.alcarney.me/main.f0fcfa33b6ee0d4eb9f5f5d87692f86fb025cfdb3907f9545b6b316fa12a3587.css" /></head>

<body class="bg-gray-100 flex flex-col justify-between min-h-screen items-center">
    <div class="flex items-baseline justify-between w-full p-4 bg-white border-b">

        <div>
            <h1>Alex Carney</h1>
        </div>

        <div class="flex justify-center flex-grow">
        </div>

        <nav class="flex space-x-4 items-between">
            <a href="/blog">Blog</a>
            <a href="/code">Code</a>
            <a href="/notes">Notes</a>
        </nav>
    </div>

    <main class="max-w-4xl w-full flex-grow mb-8">

<h2 class="text-2xl text-green-600 mt-8 whitespace-normal">
    <span id="folder-base">code/ccalc/</span><span class="text-gray-800" id="current-folder"></span>
</h2>

<div class="bg-white border shadow-lg mt-8">
    <div id="folders">
        
        
<div id="code/ccalc/" class="border rounded shadow-inset divide-y flex flex-col m-4">
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('ccalc')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#folder" />
</svg></span>
    <span class="ml-2">ccalc</span>
  </div>
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('code\/ccalc\//.gitignore')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#file-text" />
</svg></span>
    <span class="ml-2">.gitignore</span>
  </div>
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('code\/ccalc\//ccalcmodule.c')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#file-text" />
</svg></span>
    <span class="ml-2">ccalcmodule.c</span>
  </div>
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('code\/ccalc\//setup.py')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#file-text" />
</svg></span>
    <span class="ml-2">setup.py</span>
  </div>
</div>





<div id="code/ccalc/ccalc" class="border rounded shadow-inset divide-y flex flex-col m-4">
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#corner-left-up" />
</svg></span>
    <span class="ml-2">..</span>
  </div>
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('code\/ccalc\/ccalc/__init__.py')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#file-text" />
</svg></span>
    <span class="ml-2">__init__.py</span>
  </div>
</div>




<div id="code/ccalc/ccalc/__init__.py" class="prose prose-lg max-w-none"><div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#dc322f;font-weight:bold">import</span> <span style="color:#268bd2">_ccalc</span>

<span style="color:#268bd2">eval_ast</span> = <span style="color:#268bd2">_ccalc</span>.<span style="color:#268bd2">eval_ast</span>

<span style="color:#859900">class</span> <span style="color:#cb4b16">AstNode</span>:
    <span style="color:#2aa198">&#34;&#34;&#34;Base AstNode class.&#34;&#34;&#34;</span>

    <span style="color:#268bd2">LITERAL</span> = <span style="color:#2aa198;font-weight:bold">0</span>
    <span style="color:#268bd2">PLUS</span> = <span style="color:#2aa198;font-weight:bold">1</span>
    <span style="color:#268bd2">MULTIPLY</span> = <span style="color:#2aa198;font-weight:bold">2</span>

    <span style="color:#859900">def</span> <span style="color:#268bd2">__init__</span>(<span style="color:#268bd2">self</span>, <span style="color:#cb4b16">type</span>=<span style="color:#268bd2">None</span>, <span style="color:#268bd2">value</span>=<span style="color:#268bd2">None</span>, <span style="color:#268bd2">left</span>=<span style="color:#268bd2">None</span>, <span style="color:#268bd2">right</span>=<span style="color:#268bd2">None</span>):

        <span style="color:#859900">if</span> <span style="color:#268bd2">left</span> <span style="color:#859900">is</span> <span style="color:#859900">not</span> <span style="color:#268bd2">None</span> <span style="color:#859900">and</span> <span style="color:#859900">not</span> <span style="color:#cb4b16">isinstance</span>(<span style="color:#268bd2">left</span>, <span style="color:#268bd2">AstNode</span>):
            <span style="color:#268bd2">left</span> = <span style="color:#268bd2">Literal</span>(<span style="color:#268bd2">left</span>)

        <span style="color:#859900">if</span> <span style="color:#268bd2">right</span> <span style="color:#859900">is</span> <span style="color:#859900">not</span> <span style="color:#268bd2">None</span> <span style="color:#859900">and</span> <span style="color:#859900">not</span> <span style="color:#cb4b16">isinstance</span>(<span style="color:#268bd2">right</span>, <span style="color:#268bd2">AstNode</span>):
            <span style="color:#268bd2">right</span> = <span style="color:#268bd2">Literal</span>(<span style="color:#268bd2">right</span>)

        <span style="color:#268bd2">self</span>.<span style="color:#268bd2">type</span> = <span style="color:#cb4b16">type</span>
        <span style="color:#268bd2">self</span>.<span style="color:#268bd2">value</span> = <span style="color:#268bd2">value</span>
        <span style="color:#268bd2">self</span>.<span style="color:#268bd2">left</span> = <span style="color:#268bd2">left</span>
        <span style="color:#268bd2">self</span>.<span style="color:#268bd2">right</span> = <span style="color:#268bd2">right</span>

    <span style="color:#859900">def</span> <span style="color:#268bd2">__repr__</span>(<span style="color:#268bd2">self</span>):

        <span style="color:#268bd2">name</span> = <span style="color:#268bd2">self</span>.<span style="color:#268bd2">__class__</span>.<span style="color:#268bd2">__name__</span>
        <span style="color:#268bd2">detail</span> = <span style="color:#2aa198">&#34;&#34;</span>

        <span style="color:#859900">if</span> <span style="color:#268bd2">self</span>.<span style="color:#268bd2">value</span> <span style="color:#859900">is</span> <span style="color:#859900">not</span> <span style="color:#268bd2">None</span>:
            <span style="color:#268bd2">detail</span> = <span style="color:#cb4b16">str</span>(<span style="color:#268bd2">self</span>.<span style="color:#268bd2">value</span>)
        <span style="color:#859900">else</span>:
            <span style="color:#268bd2">detail</span> = <span style="color:#268bd2">f</span><span style="color:#2aa198">&#34;{self.left}, {self.right}&#34;</span>

        <span style="color:#859900">return</span> <span style="color:#268bd2">f</span><span style="color:#2aa198">&#34;{name}&lt;{detail}&gt;&#34;</span>

    <span style="color:#859900">def</span> <span style="color:#268bd2">__len__</span>(<span style="color:#268bd2">self</span>):
        <span style="color:#268bd2">left</span> = <span style="color:#2aa198;font-weight:bold">0</span> <span style="color:#859900">if</span> <span style="color:#268bd2">self</span>.<span style="color:#268bd2">left</span> <span style="color:#859900">is</span> <span style="color:#268bd2">None</span> <span style="color:#859900">else</span> <span style="color:#cb4b16">len</span>(<span style="color:#268bd2">self</span>.<span style="color:#268bd2">left</span>)
        <span style="color:#268bd2">right</span> = <span style="color:#2aa198;font-weight:bold">0</span> <span style="color:#859900">if</span> <span style="color:#268bd2">self</span>.<span style="color:#268bd2">right</span> <span style="color:#859900">is</span> <span style="color:#268bd2">None</span> <span style="color:#859900">else</span> <span style="color:#cb4b16">len</span>(<span style="color:#268bd2">self</span>.<span style="color:#268bd2">right</span>)

        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">1</span> + <span style="color:#268bd2">left</span> + <span style="color:#268bd2">right</span>

    <span style="color:#859900">def</span> <span style="color:#268bd2">__add__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">other</span>):
        <span style="color:#859900">return</span> <span style="color:#268bd2">Plus</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">other</span>)

    <span style="color:#859900">def</span> <span style="color:#268bd2">__radd__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">other</span>):
        <span style="color:#859900">return</span> <span style="color:#268bd2">Plus</span>(<span style="color:#268bd2">other</span>, <span style="color:#268bd2">self</span>)

    <span style="color:#859900">def</span> <span style="color:#268bd2">__mul__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">other</span>):
        <span style="color:#859900">return</span> <span style="color:#268bd2">Multiply</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">other</span>)

    <span style="color:#859900">def</span> <span style="color:#268bd2">__rmul__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">other</span>):
        <span style="color:#859900">return</span> <span style="color:#268bd2">Multiply</span>(<span style="color:#268bd2">other</span>, <span style="color:#268bd2">self</span>)


<span style="color:#859900">class</span> <span style="color:#cb4b16">Literal</span>(<span style="color:#268bd2">AstNode</span>):

    <span style="color:#859900">def</span> <span style="color:#268bd2">__init__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">value</span>):
        <span style="color:#859900">if</span> <span style="color:#859900">not</span> <span style="color:#cb4b16">isinstance</span>(<span style="color:#268bd2">value</span>, (<span style="color:#cb4b16">int</span>, <span style="color:#cb4b16">float</span>)):
            <span style="color:#268bd2">message</span> = <span style="color:#2aa198">&#34;Type &#39;{}&#39; is not a valid literal&#34;</span>
            <span style="color:#859900">raise</span> <span style="color:#268bd2">TypeError</span>(<span style="color:#268bd2">message</span>.<span style="color:#268bd2">format</span>(<span style="color:#cb4b16">type</span>(<span style="color:#268bd2">value</span>)))

        <span style="color:#cb4b16">super</span>().<span style="color:#268bd2">__init__</span>(<span style="color:#cb4b16">type</span>=<span style="color:#268bd2">AstNode</span>.<span style="color:#268bd2">LITERAL</span>, <span style="color:#268bd2">value</span>=<span style="color:#cb4b16">float</span>(<span style="color:#268bd2">value</span>))


<span style="color:#859900">class</span> <span style="color:#cb4b16">Plus</span>(<span style="color:#268bd2">AstNode</span>):

    <span style="color:#859900">def</span> <span style="color:#268bd2">__init__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">left</span>, <span style="color:#268bd2">right</span>):
        <span style="color:#cb4b16">super</span>().<span style="color:#268bd2">__init__</span>(<span style="color:#cb4b16">type</span>=<span style="color:#268bd2">AstNode</span>.<span style="color:#268bd2">PLUS</span>, <span style="color:#268bd2">left</span>=<span style="color:#268bd2">left</span>, <span style="color:#268bd2">right</span>=<span style="color:#268bd2">right</span>)


<span style="color:#859900">class</span> <span style="color:#cb4b16">Multiply</span>(<span style="color:#268bd2">AstNode</span>):

    <span style="color:#859900">def</span> <span style="color:#268bd2">__init__</span>(<span style="color:#268bd2">self</span>, <span style="color:#268bd2">left</span>, <span style="color:#268bd2">right</span>):
        <span style="color:#cb4b16">super</span>().<span style="color:#268bd2">__init__</span>(<span style="color:#cb4b16">type</span>=<span style="color:#268bd2">AstNode</span>.<span style="color:#268bd2">MULTIPLY</span>, <span style="color:#268bd2">left</span>=<span style="color:#268bd2">left</span>, <span style="color:#268bd2">right</span>=<span style="color:#268bd2">right</span>)
</code></pre></td></tr></table>
</div>
</div>
</div>



<div id="code/ccalc//.gitignore" class="prose prose-lg max-w-none"><pre><code class="language-gitignore" data-lang="gitignore">build
dist
__pycache__
*.pyc
*.egg-info</code></pre>
</div>
<div id="code/ccalc//ccalcmodule.c" class="prose prose-lg max-w-none"><div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#93a1a1;font-style:italic">#define PY_SSIZE_T_CLEAN
</span><span style="color:#93a1a1;font-style:italic">#include</span> <span style="color:#93a1a1;font-style:italic">&lt;Python.h&gt;</span><span style="color:#93a1a1;font-style:italic">
</span><span style="color:#93a1a1;font-style:italic"></span>
<span style="color:#859900">typedef</span> <span style="color:#859900">enum</span> {
    <span style="color:#268bd2">AST_LITERAL</span>,
    <span style="color:#268bd2">AST_PLUS</span>,
    <span style="color:#268bd2">AST_MULTIPLY</span>,
} <span style="color:#268bd2">AstNodeType</span>;

<span style="color:#859900">typedef</span> <span style="color:#859900">struct</span> <span style="color:#268bd2">_ast</span> {
    <span style="color:#93a1a1;font-style:italic">/* The type of node this represents e.g.
</span><span style="color:#93a1a1;font-style:italic">       a literal, an operator etc. */</span>
    <span style="color:#268bd2">AstNodeType</span> <span style="color:#268bd2">type</span>;

    <span style="color:#93a1a1;font-style:italic">/* In the case of a literal value, this field
</span><span style="color:#93a1a1;font-style:italic">       holds the actual value */</span>
    <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">value</span>;

    <span style="color:#93a1a1;font-style:italic">/* In the case of an operator, this pointer
</span><span style="color:#93a1a1;font-style:italic">       refers to the left child node */</span>
    <span style="color:#859900">struct</span> <span style="color:#268bd2">_ast</span> *<span style="color:#268bd2">left</span>;

    <span style="color:#93a1a1;font-style:italic">/* In the case of an operator, this pointer
</span><span style="color:#93a1a1;font-style:italic">       refers to the right child node */</span>
    <span style="color:#859900">struct</span> <span style="color:#268bd2">_ast</span> *<span style="color:#268bd2">right</span>;
} <span style="color:#268bd2">AstNode</span>;

<span style="color:#859900;font-weight:bold">void</span>
<span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span>, <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">level</span>)
{
    <span style="color:#859900">for</span> (<span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">i</span> = <span style="color:#2aa198;font-weight:bold">0</span>; <span style="color:#268bd2">i</span> &lt; <span style="color:#268bd2">level</span>; <span style="color:#268bd2">i</span>++) {
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;  &#34;</span>);
    }

    <span style="color:#859900">switch</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">type</span>) {
    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_LITERAL</span>:
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;%.2f</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>, <span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">value</span>);
        <span style="color:#859900">break</span>;

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_PLUS</span>:
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;+</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#859900">break</span>;

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_MULTIPLY</span>:
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;*</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#859900">break</span>;
    }
}

<span style="color:#859900;font-weight:bold">double</span>
<span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span>)
{
    <span style="color:#859900">switch</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">type</span>) {
    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_LITERAL</span>:
        <span style="color:#859900">return</span> <span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">value</span>;

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_PLUS</span>: {
        <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">a</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>);
        <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">b</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>);

        <span style="color:#859900">return</span> <span style="color:#268bd2">a</span> + <span style="color:#268bd2">b</span>;
    }

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_MULTIPLY</span>: {
        <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">a</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>);
        <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">b</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>);

        <span style="color:#859900">return</span> <span style="color:#268bd2">a</span> * <span style="color:#268bd2">b</span>;
    }
    <span style="color:#859900">default</span>:
        <span style="color:#268bd2">assert</span>(<span style="color:#2aa198;font-weight:bold">0</span>); <span style="color:#93a1a1;font-style:italic">// Unknown node type!
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#859900">return</span> -<span style="color:#2aa198;font-weight:bold">1</span>;
    }
}

<span style="color:#859900">static</span> <span style="color:#859900;font-weight:bold">int</span>
<span style="color:#268bd2">AstNode_FromPyObject</span>(<span style="color:#268bd2">PyObject</span>* <span style="color:#268bd2">obj</span>, <span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span>, <span style="color:#268bd2">Py_ssize_t</span> *<span style="color:#268bd2">index</span>)
{
    <span style="color:#268bd2">PyObject</span>* <span style="color:#268bd2">type</span> = <span style="color:#268bd2">PyObject_GetAttrString</span>(<span style="color:#268bd2">obj</span>, <span style="color:#2aa198">&#34;type&#34;</span>);
    <span style="color:#859900">if</span> (<span style="color:#268bd2">type</span> == <span style="color:#cb4b16">NULL</span>) {
        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
    }

    <span style="color:#859900;font-weight:bold">long</span> <span style="color:#268bd2">node_type</span> = <span style="color:#268bd2">PyLong_AsLong</span>(<span style="color:#268bd2">type</span>);
    <span style="color:#268bd2">Py_DECREF</span>(<span style="color:#268bd2">type</span>);

    <span style="color:#93a1a1;font-style:italic">// Get a pointer to the current node.
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">node</span> = &amp;<span style="color:#268bd2">ast</span>[*<span style="color:#268bd2">index</span>];

    <span style="color:#859900">switch</span>(<span style="color:#268bd2">node_type</span>) {
    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_LITERAL</span>: {

        <span style="color:#268bd2">PyObject</span>* <span style="color:#268bd2">value</span> = <span style="color:#268bd2">PyObject_GetAttrString</span>(<span style="color:#268bd2">obj</span>, <span style="color:#2aa198">&#34;value&#34;</span>);
        <span style="color:#859900">if</span> (<span style="color:#268bd2">value</span> == <span style="color:#cb4b16">NULL</span>) {
            <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
        }

        <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">v</span> = <span style="color:#268bd2">PyFloat_AsDouble</span>(<span style="color:#268bd2">value</span>);
        <span style="color:#268bd2">Py_DECREF</span>(<span style="color:#268bd2">value</span>);

        <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_LITERAL</span>;
        <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">value</span> = <span style="color:#268bd2">v</span>;
        <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">left</span> = <span style="color:#cb4b16">NULL</span>;
        <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">right</span> = <span style="color:#cb4b16">NULL</span>;

        <span style="color:#93a1a1;font-style:italic">// No need to recurse so return early.
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">1</span>;
    }
    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_PLUS</span>: {
        <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_PLUS</span>;
        <span style="color:#859900">break</span>;
    }

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_MULTIPLY</span>: {
        <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_MULTIPLY</span>;
        <span style="color:#859900">break</span>;
    }

    <span style="color:#859900">default</span>:
        <span style="color:#93a1a1;font-style:italic">// TODO: Raise exception
</span><span style="color:#93a1a1;font-style:italic"></span>        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;Error! Field &#39;type&#39; was not a valid node type.</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>);
        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
    }


    <span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">left</span> = <span style="color:#268bd2">PyObject_GetAttrString</span>(<span style="color:#268bd2">obj</span>, <span style="color:#2aa198">&#34;left&#34;</span>);
    <span style="color:#859900">if</span> (<span style="color:#268bd2">left</span> == <span style="color:#cb4b16">NULL</span>) {
        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
    }

    <span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">right</span> = <span style="color:#268bd2">PyObject_GetAttrString</span>(<span style="color:#268bd2">obj</span>, <span style="color:#2aa198">&#34;right&#34;</span>);
    <span style="color:#859900">if</span> (<span style="color:#268bd2">right</span> == <span style="color:#cb4b16">NULL</span>) {
        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
    }

    <span style="color:#93a1a1;font-style:italic">// Increment the index to get pointers to the next array cells.
</span><span style="color:#93a1a1;font-style:italic"></span>    (*<span style="color:#268bd2">index</span>)++;
    <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">left</span> = &amp;<span style="color:#268bd2">ast</span>[*<span style="color:#268bd2">index</span>];

    <span style="color:#859900">if</span> (!<span style="color:#268bd2">AstNode_FromPyObject</span>(<span style="color:#268bd2">left</span>, <span style="color:#268bd2">ast</span>, <span style="color:#268bd2">index</span>)) {
        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
    }

    (*<span style="color:#268bd2">index</span>)++;
    <span style="color:#268bd2">node</span>-&gt;<span style="color:#268bd2">right</span> = &amp;<span style="color:#268bd2">ast</span>[*<span style="color:#268bd2">index</span>];

    <span style="color:#859900">if</span> (!<span style="color:#268bd2">AstNode_FromPyObject</span>(<span style="color:#268bd2">right</span>, <span style="color:#268bd2">ast</span>, <span style="color:#268bd2">index</span>)) {
        <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
    }

    <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">1</span>;
}

<span style="color:#859900">static</span> <span style="color:#268bd2">AstNode</span>*
<span style="color:#268bd2">AstTree_FromPyObject</span>(<span style="color:#268bd2">PyObject</span>* <span style="color:#268bd2">obj</span>)
{
    <span style="color:#93a1a1;font-style:italic">// Allocate enough memory to store the resulting AST.
</span><span style="color:#93a1a1;font-style:italic"></span>    <span style="color:#268bd2">Py_ssize_t</span> <span style="color:#268bd2">num_nodes</span> = <span style="color:#268bd2">PyObject_Length</span>(<span style="color:#268bd2">obj</span>);
    <span style="color:#859900">if</span> (<span style="color:#268bd2">num_nodes</span> == -<span style="color:#2aa198;font-weight:bold">1</span>) {
        <span style="color:#859900">return</span> <span style="color:#cb4b16">NULL</span>;
    }

    <span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span> = <span style="color:#268bd2">malloc</span>(<span style="color:#268bd2">num_nodes</span> * <span style="color:#859900">sizeof</span>(<span style="color:#268bd2">AstNode</span>));
    <span style="color:#859900">if</span> (<span style="color:#268bd2">ast</span> == <span style="color:#cb4b16">NULL</span>) {
        <span style="color:#268bd2">PyErr_SetString</span>(<span style="color:#268bd2">PyExc_MemoryError</span>, <span style="color:#2aa198">&#34;Unable to allocate memory for the AST.&#34;</span>) ;
        <span style="color:#859900">return</span> <span style="color:#cb4b16">NULL</span>;
    }

    <span style="color:#268bd2">Py_ssize_t</span> <span style="color:#268bd2">index</span> = <span style="color:#2aa198;font-weight:bold">0</span>;
    <span style="color:#859900">if</span> (!<span style="color:#268bd2">AstNode_FromPyObject</span>(<span style="color:#268bd2">obj</span>, <span style="color:#268bd2">ast</span>, &amp;<span style="color:#268bd2">index</span>)) {
        <span style="color:#268bd2">free</span>(<span style="color:#268bd2">ast</span>);
        <span style="color:#859900">return</span> <span style="color:#cb4b16">NULL</span>;
    }

    <span style="color:#859900">return</span> <span style="color:#268bd2">ast</span>;
}

<span style="color:#859900">static</span> <span style="color:#268bd2">PyObject</span>*
<span style="color:#268bd2">method_eval_ast</span>(<span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">self</span>, <span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">args</span>)
{
    <span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">obj</span> = <span style="color:#cb4b16">NULL</span>;

    <span style="color:#859900">if</span> (!<span style="color:#268bd2">PyArg_ParseTuple</span>(<span style="color:#268bd2">args</span>, <span style="color:#2aa198">&#34;O&#34;</span>, &amp;<span style="color:#268bd2">obj</span>)) {
        <span style="color:#859900">return</span> <span style="color:#cb4b16">NULL</span>;
    }

    <span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span> = <span style="color:#268bd2">AstTree_FromPyObject</span>(<span style="color:#268bd2">obj</span>);
    <span style="color:#859900">if</span> (<span style="color:#268bd2">ast</span> == <span style="color:#cb4b16">NULL</span>) {
        <span style="color:#859900">return</span> <span style="color:#cb4b16">NULL</span>;
    };

    <span style="color:#859900;font-weight:bold">double</span> <span style="color:#268bd2">result</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>);
    <span style="color:#268bd2">free</span>(<span style="color:#268bd2">ast</span>);
    <span style="color:#859900">return</span> <span style="color:#268bd2">PyFloat_FromDouble</span>(<span style="color:#268bd2">result</span>);
}

<span style="color:#859900">static</span> <span style="color:#268bd2">PyObject</span>*
<span style="color:#268bd2">method_hello_world</span>(<span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">self</span>, <span style="color:#268bd2">PyObject</span> *<span style="color:#268bd2">args</span>)
{
    <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;Hello, World!</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>);
    <span style="color:#268bd2">Py_RETURN_NONE</span>;
}

<span style="color:#859900">static</span> <span style="color:#268bd2">PyMethodDef</span> <span style="color:#268bd2">ccalc_methods</span>[] = {
    {<span style="color:#2aa198">&#34;hello_world&#34;</span>, <span style="color:#268bd2">method_hello_world</span>, <span style="color:#268bd2">METH_VARARGS</span>, <span style="color:#2aa198">&#34;Print &#39;Hello, World!&#39;.&#34;</span>},
    {<span style="color:#2aa198">&#34;eval_ast&#34;</span>, <span style="color:#268bd2">method_eval_ast</span>, <span style="color:#268bd2">METH_VARARGS</span>, <span style="color:#2aa198">&#34;Evaluate the given ast.&#34;</span>},
    {<span style="color:#cb4b16">NULL</span>, <span style="color:#cb4b16">NULL</span>, <span style="color:#2aa198;font-weight:bold">0</span>, <span style="color:#cb4b16">NULL</span>}
};

<span style="color:#859900">static</span> <span style="color:#859900">struct</span> <span style="color:#268bd2">PyModuleDef</span> <span style="color:#268bd2">ccalcmodule</span> = {
    <span style="color:#268bd2">PyModuleDef_HEAD_INIT</span>,
    <span style="color:#2aa198">&#34;_ccalc&#34;</span>,
    <span style="color:#2aa198">&#34;Simple calculator implemented in C&#34;</span>,
    -<span style="color:#2aa198;font-weight:bold">1</span>,
    <span style="color:#268bd2">ccalc_methods</span>
};

<span style="color:#268bd2">PyMODINIT_FUNC</span>
<span style="color:#268bd2">PyInit__ccalc</span>()
{
    <span style="color:#859900">return</span> <span style="color:#268bd2">PyModule_Create</span>(&amp;<span style="color:#268bd2">ccalcmodule</span>);
}
</code></pre></td></tr></table>
</div>
</div>
</div>
<div id="code/ccalc//setup.py" class="prose prose-lg max-w-none"><div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#dc322f;font-weight:bold">from</span> <span style="color:#268bd2">setuptools</span> <span style="color:#dc322f;font-weight:bold">import</span> <span style="color:#268bd2">setup</span>, <span style="color:#268bd2">Extension</span>

<span style="color:#268bd2">ccalcmod</span> = <span style="color:#268bd2">Extension</span>(
    <span style="color:#2aa198">&#34;_ccalc&#34;</span>, <span style="color:#268bd2">sources</span>=[<span style="color:#2aa198">&#39;ccalcmodule.c&#39;</span>], <span style="color:#268bd2">language</span>=<span style="color:#2aa198">&#39;c&#39;</span>
)

<span style="color:#268bd2">setup</span>(
    <span style="color:#268bd2">name</span>=<span style="color:#2aa198">&#34;ccalc&#34;</span>,
    <span style="color:#268bd2">version</span>=<span style="color:#2aa198">&#34;1.0.0&#34;</span>,
    <span style="color:#268bd2">description</span>=<span style="color:#2aa198">&#34;A simple calculator implemented in C&#34;</span>,
    <span style="color:#268bd2">packages</span> = [<span style="color:#2aa198">&#39;ccalc&#39;</span>],
    <span style="color:#268bd2">ext_modules</span>=[<span style="color:#268bd2">ccalcmod</span>]
)
</code></pre></td></tr></table>
</div>
</div>
</div>

    </div>
    <div id="readme" class="mt-4 prose prose-lg prose-green p-4 max-w-none">
        <h2>README</h2>
        <p>A CPython extension that embeds the <a href="https://www.alcarney.me/code/simple-ast/">simple-ast</a>
program into Python.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">&gt;&gt;&gt; <span style="color:#dc322f;font-weight:bold">import</span> <span style="color:#268bd2">ccalc</span>
&gt;&gt;&gt; <span style="color:#268bd2">expression</span> = (<span style="color:#268bd2">ccalc</span>.<span style="color:#268bd2">Literal</span>(<span style="color:#2aa198;font-weight:bold">1</span>) + <span style="color:#2aa198;font-weight:bold">2</span>) * <span style="color:#2aa198;font-weight:bold">3</span>
&gt;&gt;&gt; <span style="color:#268bd2">expression</span>
<span style="color:#268bd2">Multiply</span>&lt;<span style="color:#268bd2">Plus</span>&lt;<span style="color:#268bd2">Literal</span>&lt;<span style="color:#2aa198;font-weight:bold">1.0</span>&gt;, <span style="color:#268bd2">Literal</span>&lt;<span style="color:#2aa198;font-weight:bold">2.0</span>&gt;&gt;, <span style="color:#268bd2">Literal</span>&lt;<span style="color:#2aa198;font-weight:bold">3.0</span>&gt;&gt;

&gt;&gt;&gt; <span style="color:#268bd2">ccalc</span>.<span style="color:#268bd2">eval_ast</span>(<span style="color:#268bd2">expression</span>)
<span style="color:#2aa198;font-weight:bold">9.0</span>
</code></pre></div><h3 id="building">Building</h3>
<p>It&rsquo;s probably worth creating a virtual environment to work in</p>
<style>
  .cli-command::before {
      content: "$ ";
  }
</style>

<pre class="whitespace-normal max-h-64 overflow-y-hidden relative">
  <button class="absolute top-0 right-0 mx-2 my-1"
          title="Copy Command"
          onclick="copyText('python -m venv .env')">
    <svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#clipboard" />
</svg>
  </button>
  <div class="cli-command">
    <code>python -m venv .env</code>
  </div>
</pre>

<p>Assuming you have a C compiler available, building the extension is as easy as
running the following command</p>
<style>
  .cli-command::before {
      content: "\28.env\29  $ ";
  }
</style>

<pre class="whitespace-normal max-h-64 overflow-y-hidden relative">
  <button class="absolute top-0 right-0 mx-2 my-1"
          title="Copy Command"
          onclick="copyText('python setup.py install')">
    <svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#clipboard" />
</svg>
  </button>
  <div class="cli-command">
    <code>python setup.py install</code>
  </div>
</pre>


        <h3>References</h3>
        <ul>
            <li>
                <a href="https://www.alcarney.me/blog/2021/ast-python-frontend/">Creating a CPython Extension</a>
                <p>Creating a Python frontend to my simple AST evaluator</p>
            </li>
        </ul>
    </div>
</div>


<script>

 const folders = document.getElementById('folders')

 const baseDir = document.getElementById("folder-base").textContent
 const currentDir = document.getElementById("current-folder")

 function chDir(dir, preserveUrl) {
     if (dir === '') {
         readme.style.display = 'block'
     } else {
         readme.style.display = 'none'
     }


     if (dir.startsWith(baseDir)) {
         dir = dir.replace(baseDir, '')
     }
     const id = `${baseDir}${dir}`

     const children = folders.children
     for (let i = 0; i < children.length; i++) {
         const node = children[i]

         if (node.id === id) {
             node.style.display = 'block'
         } else {
             node.style.display = 'none'
         }

     }

     if (dir.length > 0 && !dir.includes('.')) {
         dir = dir + '/'
     }


     if (!preserveUrl) {
         if(dir.length > 0) {
             window.location.hash = `#${dir}`
         } else {
             window.location.hash = ''
         }

         if (dir.startsWith('/')) {
             dir = dir.replace('/', '')
         }
     }

     currentDir.textContent = dir

 }

 function onUrlChange(hash, preserveUrl) {
     if (hash) {
         let dir = hash.replace(/#/, '')
                       .replace(/\/$/, '')
         chDir(dir, preserveUrl)
     } else {
         chDir('', preserveUrl)
     }
 }

 window.addEventListener('hashchange', () => {
     onUrlChange(window.location.hash)
 })


 onUrlChange(window.location.hash, true)

</script>



    </main><footer class="items-baseline p-4 text-white bg-gray-700 w-full">
    <div class="flex justify-between">
        <div></div>

        <div class="flex justify-between space-x-4">
            
            <a target="_blank" rel="noreferrer noopener" href="https://github.com/alcarney">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#github" />
</svg>
            </a>
            
            <a target="_blank" rel="noreferrer noopener" href="https://twitter.com/alcarneyme">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#twitter" />
</svg>
            </a>
            
            <a target="_blank" rel="noreferrer noopener" href="https://instagram.com/alcarneyme">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#instagram" />
</svg>
            </a>
            
            <a target="_blank" rel="noreferrer noopener" href="https://www.youtube.com/channel/UC5GPflgRWhnCxA0BllfP5CA">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#youtube" />
</svg>
            </a>
            
        </div>

        <div></div>
    </div>
</footer>

    <script>
      const codeBlocks = document.querySelectorAll(".highlight pre")
      Array.from(codeBlocks).forEach(el => {
          el.style.backgroundColor = "#fdf6e3"
      })

      function copyText(text) {
          const textArea = document.createElement("textarea")
          textArea.value = text

          textArea.style.top = 0
          textArea.style.left = 0
          textArea.style.position = 'fixed'

          document.body.append(textArea)
          textArea.focus()
          textArea.select()

          document.execCommand('copy')
          document.body.removeChild(textArea)
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>


</body>

</html>
