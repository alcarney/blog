<!DOCTYPE html>
<html lang="en">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="theme-color" content="#259669" />

<meta name="generator" content="Hugo 0.79.1" />
<meta name="author" content="Alex Carney" />
<meta name="description" content="A program that can construct and evaluate simple Abstract Syntax Trees
" />

<meta property="og:title" content="Simple AST" />
<meta property="og:description" content="A program that can construct and evaluate simple Abstract Syntax Trees
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.alcarney.me/code/simple-ast/" />
<meta property="article:modified_time" content="2021-05-12T18:40:05+01:00" />

<meta property="article:tag" content="c" />

<meta name="twitter:creator" content="@alcarneyme" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Simple AST"/>
<meta name="twitter:description" content="A program that can construct and evaluate simple Abstract Syntax Trees
"/>


<title>Simple AST | Alex Carney</title>



<link rel="stylesheet" href="https://www.alcarney.me/main.f0fcfa33b6ee0d4eb9f5f5d87692f86fb025cfdb3907f9545b6b316fa12a3587.css" /></head>

<body class="bg-gray-100 flex flex-col justify-between min-h-screen items-center">
    <div class="flex items-baseline justify-between w-full p-4 bg-white border-b">

        <div>
            <h1>Alex Carney</h1>
        </div>

        <div class="flex justify-center flex-grow">
        </div>

        <nav class="flex space-x-4 items-between">
            <a href="/blog">Blog</a>
            <a href="/code">Code</a>
            <a href="/notes">Notes</a>
        </nav>
    </div>

    <main class="max-w-4xl w-full flex-grow mb-8">

<h2 class="text-2xl text-green-600 mt-8 whitespace-normal">
    <span id="folder-base">code/simple-ast/</span><span class="text-gray-800" id="current-folder"></span>
</h2>

<div class="bg-white border shadow-lg mt-8">
    <div id="folders">
        
        
<div id="code/simple-ast/" class="border rounded shadow-inset divide-y flex flex-col m-4">
  <div class="flex items-center pl-1 py-2 hover:bg-green-50" onclick="chDir('code\/simple-ast\//simple-ast.c')">
    <span><svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#file-text" />
</svg></span>
    <span class="ml-2">simple-ast.c</span>
  </div>
</div>




<div id="code/simple-ast//simple-ast.c" class="prose prose-lg max-w-none"><div class="highlight"><div style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">99
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#93a1a1;font-style:italic">#include</span> <span style="color:#93a1a1;font-style:italic">&lt;stdio.h&gt;</span><span style="color:#93a1a1;font-style:italic">
</span><span style="color:#93a1a1;font-style:italic"></span>
<span style="color:#859900">typedef</span> <span style="color:#859900">enum</span> {
    <span style="color:#268bd2">AST_LITERAL</span>,
    <span style="color:#268bd2">AST_PLUS</span>,
    <span style="color:#268bd2">AST_MULTIPLY</span>,
} <span style="color:#268bd2">AstNodeType</span>;

<span style="color:#859900">typedef</span> <span style="color:#859900">struct</span> <span style="color:#268bd2">_ast</span> {
    <span style="color:#93a1a1;font-style:italic">/* The type of node this represents e.g.
</span><span style="color:#93a1a1;font-style:italic">       a literal, an operator etc. */</span>
    <span style="color:#268bd2">AstNodeType</span> <span style="color:#268bd2">type</span>;

    <span style="color:#93a1a1;font-style:italic">/* In the case of a literal value, this field
</span><span style="color:#93a1a1;font-style:italic">       holds the actual value */</span>
    <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">value</span>;

    <span style="color:#93a1a1;font-style:italic">/* In the case of an operator, this pointer
</span><span style="color:#93a1a1;font-style:italic">       refers to the left child node */</span>
    <span style="color:#859900">struct</span> <span style="color:#268bd2">_ast</span> *<span style="color:#268bd2">left</span>;

    <span style="color:#93a1a1;font-style:italic">/* In the case of an operator, this pointer
</span><span style="color:#93a1a1;font-style:italic">       refers to the right child node */</span>
    <span style="color:#859900">struct</span> <span style="color:#268bd2">_ast</span> *<span style="color:#268bd2">right</span>;
} <span style="color:#268bd2">AstNode</span>;

<span style="color:#859900;font-weight:bold">void</span>
<span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span>, <span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">level</span>)
{
    <span style="color:#859900">for</span> (<span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">i</span> = <span style="color:#2aa198;font-weight:bold">0</span>; <span style="color:#268bd2">i</span> &lt; <span style="color:#268bd2">level</span>; <span style="color:#268bd2">i</span>++) {
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;  &#34;</span>);
    }

    <span style="color:#859900">switch</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">type</span>) {
    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_LITERAL</span>:
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;%.2f</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>, <span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">value</span>);
        <span style="color:#859900">break</span>;

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_PLUS</span>:
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;+</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#859900">break</span>;

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_MULTIPLY</span>:
        <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;*</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#268bd2">ast_print</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>, <span style="color:#268bd2">level</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
        <span style="color:#859900">break</span>;
    }
}

<span style="color:#859900;font-weight:bold">float</span>
<span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">AstNode</span> *<span style="color:#268bd2">ast</span>)
{
    <span style="color:#859900">switch</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">type</span>) {
    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_LITERAL</span>:
        <span style="color:#859900">return</span> <span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">value</span>;

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_PLUS</span>: {
        <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">a</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>);
        <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">b</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>);

        <span style="color:#859900">return</span> <span style="color:#268bd2">a</span> + <span style="color:#268bd2">b</span>;
    }

    <span style="color:#859900">case</span> <span style="color:#268bd2">AST_MULTIPLY</span>: {
        <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">a</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">left</span>);
        <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">b</span> = <span style="color:#268bd2">ast_evaluate</span>(<span style="color:#268bd2">ast</span>-&gt;<span style="color:#268bd2">right</span>);

        <span style="color:#859900">return</span> <span style="color:#268bd2">a</span> * <span style="color:#268bd2">b</span>;
    }
    }
}

<span style="color:#859900;font-weight:bold">int</span>
<span style="color:#268bd2">main</span>()
{
    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">one</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_LITERAL</span>, .<span style="color:#268bd2">value</span> = <span style="color:#2aa198;font-weight:bold">1.0f</span> };
    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">two</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_LITERAL</span>, .<span style="color:#268bd2">value</span> = <span style="color:#2aa198;font-weight:bold">2.0f</span> };
    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">three</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_LITERAL</span>, .<span style="color:#268bd2">value</span> = <span style="color:#2aa198;font-weight:bold">3.0f</span> };

    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">plus1</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_PLUS</span>, .<span style="color:#268bd2">left</span> = &amp;<span style="color:#268bd2">one</span>, .<span style="color:#268bd2">right</span> = &amp;<span style="color:#268bd2">two</span>};
    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">example1</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_MULTIPLY</span>, .<span style="color:#268bd2">left</span> = &amp;<span style="color:#268bd2">plus1</span>, .<span style="color:#268bd2">right</span> = &amp;<span style="color:#268bd2">three</span>};

    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">mul1</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_MULTIPLY</span>, .<span style="color:#268bd2">left</span> = &amp;<span style="color:#268bd2">two</span>, .<span style="color:#268bd2">right</span> = &amp;<span style="color:#268bd2">three</span>};
    <span style="color:#268bd2">AstNode</span> <span style="color:#268bd2">example2</span> = { .<span style="color:#268bd2">type</span> = <span style="color:#268bd2">AST_PLUS</span>, .<span style="color:#268bd2">left</span> = &amp;<span style="color:#268bd2">one</span>, .<span style="color:#268bd2">right</span> = &amp;<span style="color:#268bd2">mul1</span>};

    <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">result1</span> = <span style="color:#268bd2">ast_evaluate</span>(&amp;<span style="color:#268bd2">example1</span>);
    <span style="color:#859900;font-weight:bold">float</span> <span style="color:#268bd2">result2</span> = <span style="color:#268bd2">ast_evaluate</span>(&amp;<span style="color:#268bd2">example2</span>);

    <span style="color:#268bd2">ast_print</span>(&amp;<span style="color:#268bd2">example1</span>, <span style="color:#2aa198;font-weight:bold">0</span>);
    <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;Example 1: %.2f</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>, <span style="color:#268bd2">result1</span>);

    <span style="color:#268bd2">ast_print</span>(&amp;<span style="color:#268bd2">example2</span>, <span style="color:#2aa198;font-weight:bold">0</span>);
    <span style="color:#268bd2">printf</span>(<span style="color:#2aa198">&#34;Example 2: %.2f</span><span style="color:#2aa198">\n</span><span style="color:#2aa198">&#34;</span>, <span style="color:#268bd2">result2</span>);

    <span style="color:#859900">return</span> <span style="color:#2aa198;font-weight:bold">0</span>;
}
</code></pre></td></tr></table>
</div>
</div>
</div>

    </div>
    <div id="readme" class="mt-4 prose prose-lg prose-green p-4 max-w-none">
        <h2>README</h2>
        <p>A simple C program that can construct and evaluate a simple Abstract Syntax Tree
(AST). The AST represents a toy &ldquo;programming language&rdquo; that only knows how to
add and multiply floating point numbers together.</p>
<pre><code>$ ./simple-ast
*
  +
    1.00
    2.00
  3.00
Example 1: 9.00
+
  1.00
  *
    2.00
    3.00
Example 2: 7.00
</code></pre><h3 id="building">Building</h3>
<p>Having no real dependencies beyond the standard library this program can be
compiled with just a C compiler</p>
<style>
  .cli-command::before {
      content: "$ ";
  }
</style>

<pre class="whitespace-normal max-h-64 overflow-y-hidden relative">
  <button class="absolute top-0 right-0 mx-2 my-1"
          title="Copy Command"
          onclick="copyText('gcc simple-ast.c -o simple-ast')">
    <svg class="w-6 h-6 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#clipboard" />
</svg>
  </button>
  <div class="cli-command">
    <code>gcc simple-ast.c -o simple-ast</code>
  </div>
</pre>


        <h3>References</h3>
        <ul>
            <li>
                <a href="https://www.alcarney.me/blog/2021/ast-python-frontend/">Creating a CPython Extension</a>
                <p>Creating a Python frontend to my simple AST evaluator</p>
            </li>
            <li>
                <a href="https://www.alcarney.me/blog/2020/ast-simple-eval/">Evaluating a Simple Abstract Syntax Tree</a>
                <p>Playing around with constructing and evaluating Abstract Syntax Trees
</p>
            </li>
        </ul>
    </div>
</div>


<script>

 const folders = document.getElementById('folders')

 const baseDir = document.getElementById("folder-base").textContent
 const currentDir = document.getElementById("current-folder")

 function chDir(dir, preserveUrl) {
     if (dir === '') {
         readme.style.display = 'block'
     } else {
         readme.style.display = 'none'
     }


     if (dir.startsWith(baseDir)) {
         dir = dir.replace(baseDir, '')
     }
     const id = `${baseDir}${dir}`

     const children = folders.children
     for (let i = 0; i < children.length; i++) {
         const node = children[i]

         if (node.id === id) {
             node.style.display = 'block'
         } else {
             node.style.display = 'none'
         }

     }

     if (dir.length > 0 && !dir.includes('.')) {
         dir = dir + '/'
     }


     if (!preserveUrl) {
         if(dir.length > 0) {
             window.location.hash = `#${dir}`
         } else {
             window.location.hash = ''
         }

         if (dir.startsWith('/')) {
             dir = dir.replace('/', '')
         }
     }

     currentDir.textContent = dir

 }

 function onUrlChange(hash, preserveUrl) {
     if (hash) {
         let dir = hash.replace(/#/, '')
                       .replace(/\/$/, '')
         chDir(dir, preserveUrl)
     } else {
         chDir('', preserveUrl)
     }
 }

 window.addEventListener('hashchange', () => {
     onUrlChange(window.location.hash)
 })


 onUrlChange(window.location.hash, true)

</script>



    </main><footer class="items-baseline p-4 text-white bg-gray-700 w-full">
    <div class="flex justify-between">
        <div></div>

        <div class="flex justify-between space-x-4">
            
            <a target="_blank" rel="noreferrer noopener" href="https://github.com/alcarney">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#github" />
</svg>
            </a>
            
            <a target="_blank" rel="noreferrer noopener" href="https://twitter.com/alcarneyme">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#twitter" />
</svg>
            </a>
            
            <a target="_blank" rel="noreferrer noopener" href="https://instagram.com/alcarneyme">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#instagram" />
</svg>
            </a>
            
            <a target="_blank" rel="noreferrer noopener" href="https://www.youtube.com/channel/UC5GPflgRWhnCxA0BllfP5CA">
                <svg class="w-8 h-8 bg-transparent stroke-current" style="fill:none">
    <use xlink:href="/svg/feather-sprite.svg#youtube" />
</svg>
            </a>
            
        </div>

        <div></div>
    </div>
</footer>

    <script>
      const codeBlocks = document.querySelectorAll(".highlight pre")
      Array.from(codeBlocks).forEach(el => {
          el.style.backgroundColor = "#fdf6e3"
      })

      function copyText(text) {
          const textArea = document.createElement("textarea")
          textArea.value = text

          textArea.style.top = 0
          textArea.style.left = 0
          textArea.style.position = 'fixed'

          document.body.append(textArea)
          textArea.focus()
          textArea.select()

          document.execCommand('copy')
          document.body.removeChild(textArea)
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>


</body>

</html>
